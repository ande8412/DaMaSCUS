

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using DaMaSCUS &mdash; DaMaSCUS 1.0.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="DaMaSCUS 1.0.2 documentation" href="index.html"/>
        <link rel="next" title="Contact &amp; Support" href="contact.html"/>
        <link rel="prev" title="Getting started" href="gettingstarted.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> DaMaSCUS
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gettingstarted.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using DaMaSCUS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#work-flow">Work Flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-file">1. Configuration File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-simulation">2. Running the simulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyze-the-data">3. Analyze the data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plot-the-results">4. Plot the results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Contact &amp; Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">Citing DaMaSCUS</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html">Licence</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DaMaSCUS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Using DaMaSCUS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-damascus">
<h1>Using DaMaSCUS<a class="headerlink" href="#using-damascus" title="Permalink to this headline">¶</a></h1>
<div class="section" id="work-flow">
<h2>Work Flow<a class="headerlink" href="#work-flow" title="Permalink to this headline">¶</a></h2>
<p>To simulate dark matter trajectories and analyze the generated data DaMaSCUS has a clear work-flow.</p>
<ol class="arabic simple">
<li>Adjust your input parameter (such as the dark matter mass) inside the configuration file and asign a simulation ID to identify this simulation run.</li>
<li>Run the simulation module to generate the raw data.</li>
<li>Run the analysis module to process the data.</li>
<li>The results can be plotted e.g. with the included Mathematica notebook.</li>
</ol>
<div class="section" id="configuration-file">
<h3>1. Configuration File<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h3>
<p>You can find an example configuration file at</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>/bin/DaMaSCUS.cfg
</pre></div>
</div>
<p>Here you adjust all the input parameter for the next DaMaSCUS run. We go through it block by block.</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>//DaMaSCUS Configuration File

//Simulation input parameter
                simID           =       &quot;exampleID&quot;;    //MC Simulation ID
                initialruns     =       100000000L;     //Number of particles in the initial MC run
                samplesize      =       10000;          //velocity sample size per isodetection ring
                vcutoff         =       1.0;            //velocity cutoff in cm/sec
</pre></div>
</div>
<p>First you assign the simulation run a unique identifying ID. You also decide the number of particles you want to simulate in the initial run without scatterings (initialruns) and how many data points you need in each isodetection ring (samplesize). The velocity cut-off, below which a trajectory simulation is aborted.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The “L” behind the value for initialruns is necessary to denote that it is a <strong>long int</strong>.</p>
</div>
<div class="highlight-guess"><div class="highlight"><pre><span></span>//Simulation Time:
                date            =       [15,02,2016];   //Date [dd,mm,yyyy]
                time            =       [0,0,0];        //Universal time [h,m,s]
</pre></div>
</div>
<p>Next you fix the simulation date and time, which is mostly used to determine the Earth’s velocity in the galactic frame.</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>//Dark Matter Data
        //Particle data
                mass            =       500.0;          //in MeV
                sigma           =       1.0;            //in pb
                formfactor      =       &quot;None&quot;;         //Options: &quot;None&quot;, &quot;HelmApproximation&quot;
        //DM Halo
                halomodel       =       &quot;SHM&quot;;          //Options: Standard Halo Model &quot;SHM&quot;,...
                rho                     =       0.3;    //DM halo energy density in GeV/cm^3
</pre></div>
</div>
<p>These are the essential input parameter. Here you fix the DM mass, its cross-section with nucleons and whether or not to use a Helm form factor. For light DM it is recommended to deactivate it, since this speeds up the simulation considerably.</p>
<p>So far only the standard halo model is implemented, for which we can set the DM energy density.</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>//Detector depth:
                depth           =       1400.0;         //in meter
</pre></div>
</div>
<p>The depth of the isodetection rings, i.e. the underground depth of the detector of interest is determined here.</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>//Analysis parameter
                experiment      =       &quot;CRESST-II&quot;;    //Options: &quot;LUX&quot; for heavy DM,&quot;CRESST-II&quot; for light DM and &quot;None&quot;
</pre></div>
</div>
<p>And finally we decide the type of data analysis:
1.      Set “LUX” for a LUX-type detector. Use this option for heavy dark matter.
2.      Use “CRESST-II” for a CRESST-type detector, which is sensitive to DM masses down to 500 MeV.
3. Set “None”, if you are e.g. just interested in the resulting speed distributions across the globe.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Note that the configuration file can be sensitive to the input parameter type. For example it might complain if an input parameter of type <strong>double</strong> is given as “1” instead of “1.0”.</p>
</div>
</div>
<div class="section" id="running-the-simulation">
<h3>2. Running the simulation<a class="headerlink" href="#running-the-simulation" title="Permalink to this headline">¶</a></h3>
<p>After setting the input parameter and assigning a unique simulation ID we can start the MC simulation from the <strong>/bin/</strong> directory. To start run</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mpirun -n N DaMaSCUS-Simulator input.cfg
</pre></div>
</div>
<p>where <em>N</em> is the number of MPI processes and <em>input.cfg</em> is your configuration file.</p>
<p>After a successful run your terminal should show something like</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>$ mpirun -n <span class="m">4</span> DaMaSCUS-Simulator DaMaSCUS.cfg

<span class="c1">##############################</span>
DaMaSCUSv1.0 - Simulation

Starting Time: Wed Aug <span class="m">16</span> <span class="m">11</span>:34:08 <span class="m">2017</span>
Simulation ID: exampleID

Creating logfile.
Creating folder <span class="k">for</span> velocity data.
Start initial MC simulation run without DM scatterings.
        Initial run finished    <span class="o">(</span><span class="m">1</span> s<span class="o">)</span>.

Start main MC simulation run with scatterings.
        Main MC run finished    <span class="o">(</span><span class="m">4</span> s<span class="o">)</span>.

Processing Time:        <span class="m">5</span>.89347s <span class="o">(</span><span class="m">0</span>:0:5:893<span class="o">)</span>.
<span class="c1">##############################</span>
</pre></div>
</div>
<p>A copy of the used configuration file is stored in the <strong>/data/</strong> directory together with the raw data. In addition a logfile, which documents important input and output parameter is created in the <strong>/results/</strong> folder.</p>
</div>
<div class="section" id="analyze-the-data">
<h3>3. Analyze the data<a class="headerlink" href="#analyze-the-data" title="Permalink to this headline">¶</a></h3>
<p>Next we can analyze the generated data by running</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mpirun -n N DaMaSCUS-Analyzer SimulationID
</pre></div>
</div>
<p>in your terminal from the <strong>/bin/</strong> directory. The analysis type is set inside the config file <strong>/data/SimulationID.cfg</strong> and can be adjusted after the simulation has finished. The terminal output  of a successful analysis looks like</p>
<div class="highlight-guess"><div class="highlight"><pre><span></span>$ mpirun -n <span class="m">4</span> DaMaSCUS-Analyzer exampleID

<span class="c1">##############################</span>
DaMaSCUSv1.0 - Data Analysis

Starting Time:  Wed Aug <span class="m">16</span> <span class="m">11</span>:49:05 <span class="m">2017</span>
Simulation ID:  exampleID
Experiment:     None

Creating folder <span class="k">for</span> histograms.
Done.

Creating temporary files.
Reading in <span class="nb">local</span> DM densities.
Broadcast <span class="nb">local</span> DM densities to all MPI processes.
Start data analysis...

MPI rank        Isodetection ring       Local Progress  Computing time<span class="o">[</span>s<span class="o">]</span>       Residual <span class="nb">time</span> estimate<span class="o">[</span>s<span class="o">]</span>
<span class="o">(</span>*some infos about the progress*<span class="o">)</span>

Data analysis complete.
Creating ASCII output.
Delete temporary files and finish.

Processing Time:        <span class="m">1</span>.02264s <span class="o">(</span><span class="m">0</span>:0:1:22<span class="o">)</span>.
<span class="c1">##############################</span>
</pre></div>
</div>
</div>
<div class="section" id="plot-the-results">
<h3>4. Plot the results<a class="headerlink" href="#plot-the-results" title="Permalink to this headline">¶</a></h3>
<p>After the both modules have finished their computations you can use the included Mathematica notebook <strong>/plots/plots.nb</strong> to create and save plots of e.g. the speed histograms or the event rate modulation.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="contact.html" class="btn btn-neutral float-right" title="Contact &amp; Support" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="gettingstarted.html" class="btn btn-neutral" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Timon Emken.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>